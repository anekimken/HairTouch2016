function y = filter_60HzBandStop(x)
%DESIGNEDFILTER8 Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 8.3 and the DSP System Toolbox 8.6.
% Generated on: 03-Oct-2016 17:23:35

%#codegen

% To generate C/C++ code from this function use the codegen command.
% Type 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    %
    % N     = 30;    % Order
    % F3dB1 = 59;    % First
    % F3dB2 = 61;    % Second
    % Fs    = 5000;  % Sampling Frequency
    %
    % h = fdesign.bandstop('n,f3db1,f3db2', N, F3dB1, F3dB2, Fs);
    %
    % Hd = design(h, 'butter', ...
    %     'SystemObject', true);
    
    Hd = dsp.BiquadFilter( ...
        'Structure', 'Direct form II', ...
        'SOSMatrix', [1 -1.99431937517248 1 1 -1.99386174547054 ...
        0.999732980995156; 1 -1.99431937517248 1 1 -1.99424692106673 ...
        0.999741671210777; 1 -1.99431937517248 1 1 -1.99335016735612 ...
        0.999211379838957; 1 -1.99431937517248 1 1 -1.99373461589006 ...
        0.99923593582326; 1 -1.99431937517248 1 1 -1.99288285490941 ...
        0.9987260708626; 1 -1.99431937517248 1 1 -1.99324661708105 ...
        0.998762235138626; 1 -1.99431937517248 1 1 -1.9924808460532 ...
        0.998298947631549; 1 -1.99431937517248 1 1 -1.99280338641606 ...
        0.998340462453217; 1 -1.99431937517248 1 1 -1.99216188943417 ...
        0.997948939394313; 1 -1.99431937517248 1 1 -1.99242379494787 ...
        0.997988628159163; 1 -1.99431937517248 1 1 -1.99193963843049 ...
        0.99769113921886; 1 -1.99431937517248 1 1 -1.99212438399286 ...
        0.99772214501582; 1 -1.99431937517248 1 1 -1.99182310440718 ...
        0.997536179959423; 1 -1.99431937517248 1 1 -1.99191864990396 ...
        0.997553147839607; 1 -1.99431937517248 1 1 -1.99181638356779 ...
        0.997489878867097], ...
        'ScaleValues', [0.999867882208037; 0.999867882208037; ...
        0.999611114983681; 0.999611114983681; 0.999371484613708; ...
        0.999371484613708; 0.999159416728799; 0.999159416728799; ...
        0.998984119277151; 0.998984119277151; 0.998853190525944; ...
        0.998853190525944; 0.99877229784265; 0.99877229784265; ...
        0.998744939433549; 1]);
end

y = step(Hd,x);


